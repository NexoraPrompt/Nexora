<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Optimiza tu Prompt</title>

  <!-- Logo de pesta√±a (favicon) -->
  <link rel="icon" type="image/png" href="https://i.imgur.com/efDFIrP.png">

  <!-- Open Graph / Redes sociales -->
  <meta property="og:title" content="Optimiza tu Prompt">
  <meta property="og:image" content="https://i.imgur.com/efDFIrP.png">
  <meta property="og:type" content="website">
  <meta property="og:description" content="Mejora tus prompts de forma r√°pida con audio o texto.">
  <meta property="og:url" content="">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Optimiza tu Prompt">
  <meta name="twitter:image" content="https://i.imgur.com/efDFIrP.png">
  <meta name="twitter:description" content="Mejora tus prompts f√°cilmente.">

  <!-- Fuente -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .logo {
      display: block;
      margin: 2rem auto 1rem;
      max-width: 160px;
    }

    .container {
      flex: 1;
      width: 90%;
      max-width: 800px;
      margin: 1rem auto 2rem;
      background: linear-gradient(135deg, #e3e9f7, #e7e4f2);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }

    h1 {
      text-align: center;
      color: #3c366b;
      font-weight: 700;
      font-size: 1.8rem;
    }

    .content-group {
      width: 100%;
    }

    .button-row {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
    }

    .button-row button {
      font-family: 'Orbitron', sans-serif;
      flex: 1;
      padding: 12px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 10px;
      background: linear-gradient(to right, #667eea, #764ba2);
      color: white;
      font-weight: 600;
      transition: background 0.3s;
    }

    .button-row button:hover {
      background: linear-gradient(to right, #764ba2, #667eea);
    }

    textarea {
      width: 100%;
      height: 120px;
      margin-bottom: 1rem;
      padding: 12px;
      font-size: 15px;
      border-radius: 10px;
      border: 1px solid #ccc;
      resize: vertical;
      background-color: #f9fdfb;
      font-family: 'Orbitron', sans-serif;
      box-sizing: border-box;
    }

    h2 {
      margin-top: 1.5rem;
      color: #3c366b;
      font-weight: 600;
    }

    #durationDisplay {
      text-align: center;
      font-size: 1.2rem;
      color: #3c366b;
      margin-top: 0.5rem;
    }

    footer {
      background-color: #2d3748;
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 14px;
    }

    footer a {
      color: #90cdf4;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Media Queries para m√≥vil */
    @media (max-width: 480px) {
      .button-row {
        flex-direction: column;
      }

      .button-row button {
        width: 100%;
      }

      h1 {
        font-size: 1.6rem;
      }

      h2 {
        font-size: 1.1rem;
      }

      textarea {
        font-size: 15px;
        min-height: 110px;
        padding: 12px 14px;
      }

      .container {
        padding: 1rem 1rem 1.5rem;
        border-radius: 16px;
      }

      #durationDisplay {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <img src="https://i.imgur.com/Au9XUJn.png" alt="Logo" class="logo">

  <div class="container">
    <h1>Optimiza tu Prompt</h1>
    <div class="content-group">
      <div class="button-row">
        <button id="recordButton">üé§ Grabar Audio</button>
        <button id="optimizeButton">‚ú® Optimizar Prompt</button>
      </div>
      <div id="durationDisplay">‚è±Ô∏è Duraci√≥n: 0s</div>
      <textarea id="inputText" placeholder="Aqu√≠ aparecer√° la transcripci√≥n o escribe tu texto..."></textarea>
      <h2>üîß Prompt optimizado:</h2>
      <textarea id="optimizedPrompt" readonly placeholder="Aqu√≠ se mostrar√° el prompt mejorado..."></textarea>
    </div>
  </div>

  <!-- Bot√≥n fuera del container -->
  <div style="text-align: center; margin-bottom: 2rem;">
    <button onclick="window.location.href='roles.html'" style="
      font-family: 'Orbitron', sans-serif;
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 12px;
      background: linear-gradient(to right, #667eea, #764ba2);
      color: white;
      font-weight: 600;
      transition: background 0.3s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    " onmouseover="this.style.background='linear-gradient(to right, #764ba2, #667eea)'" 
       onmouseout="this.style.background='linear-gradient(to right, #667eea, #764ba2)'">
      üé≠ Ver Roles de IA
    </button>
  </div>

  <footer>
    ¬© 2025 Nexora. Todos los derechos reservados. | <a href="#">Pol√≠tica de privacidad</a> | <a href="#">T√©rminos y condiciones</a>
  </footer>
</body>
</html>

  <script>
  const recordButton = document.getElementById("recordButton");
  const optimizeButton = document.getElementById("optimizeButton");
  const inputText = document.getElementById("inputText");
  const optimizedPrompt = document.getElementById("optimizedPrompt");
  const durationDisplay = document.getElementById("durationDisplay");

  let recognition;
  let isRecording = false;
  let startTime = 0;
  let durationInterval;

  if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SpeechRecognition();
    recognition.lang = 'es-ES';
    recognition.continuous = true;
    recognition.interimResults = false;

    recognition.onresult = (event) => {
      let transcript = "";
      for (let i = event.resultIndex; i < event.results.length; ++i) {
        transcript += event.results[i][0].transcript + " ";
      }
      inputText.value += transcript.trim() + " ";
      optimizePrompt(inputText.value);
    };

    recognition.onerror = (event) => console.error("Error de reconocimiento:", event.error);
    recognition.onend = () => { if (isRecording) recognition.start(); };

    function startRecording() {
      isRecording = true;
      inputText.value = "";
      optimizedPrompt.value = "";
      recordButton.textContent = "‚èπÔ∏è Detener";
      startTime = Date.now();
      durationInterval = setInterval(() => {
        const seconds = Math.floor((Date.now() - startTime) / 1000);
        durationDisplay.textContent = `‚è±Ô∏è Duraci√≥n: ${seconds}s`;
      }, 1000);
      recognition.start();
    }

    function stopRecording() {
      isRecording = false;
      recordButton.textContent = "üé§ Grabar Audio";
      clearInterval(durationInterval);
      durationDisplay.textContent = "‚è±Ô∏è Duraci√≥n: 0s";
      recognition.stop();
    }

    recordButton.addEventListener("click", () => {
      isRecording ? stopRecording() : startRecording();
    });
  } else {
    alert("Tu navegador no soporta reconocimiento de voz.");
    recordButton.disabled = true;
  }

  optimizeButton.addEventListener("click", () => {
    const input = inputText.value.trim();
    if (input.length === 0) {
      optimizedPrompt.value = "Por favor, escribe o graba un texto primero.";
      return;
    }
    optimizedPrompt.value = generateOptimizedPrompt(input);
  });

  function optimizePrompt(rawText) {
    const cleaned = rawText.trim();
    if (cleaned.length === 0) return;
    optimizedPrompt.value = generateOptimizedPrompt(cleaned);
  }

  function generateOptimizedPrompt(text) {
    const normalize = (str) =>
      str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().trim();

    const adjectiveExpansions = {
  // Positivos
  "bonita": "visualmente atractiva",
  "hermosa": "visual y est√©ticamente encantadora",
  "preciosa": "de gran belleza visual",
  "moderna": "actual, con un dise√±o innovador",
  "vanguardista": "de estilo adelantado a su tiempo",
  "limpia": "minimalista y sin elementos innecesarios",
  "elegante": "con una est√©tica refinada y sofisticada",
  "dinamica": "interactiva, con elementos visuales en movimiento",
  "atractiva": "que capta la atenci√≥n con un estilo llamativo",
  "simple": "intuitiva y f√°cil de entender",
  "sencilla": "sin complicaciones, clara y funcional",
  "oscura": "en modo oscuro con buen contraste",
  "clara": "con buena iluminaci√≥n y legibilidad",
  "impactante": "que cause una impresi√≥n fuerte y memorable",
  "efectiva": "que cumple su prop√≥sito de forma clara",
  "eficiente": "funciona bien con recursos m√≠nimos",
  "divertida": "con una apariencia alegre y animada",
  "luminosa": "brillante y acogedora",
  "profesional": "adecuada para un entorno formal",
  "seria": "sobria, bien estructurada",
  "accesible": "usable por personas con discapacidades",
  "inspiradora": "que estimula la creatividad o motivaci√≥n",
  "creativa": "original y expresiva",
  "art√≠stica": "con valor est√©tico o expresivo",
  "pulida": "muy bien acabada, con atenci√≥n al detalle",
  "detallada": "cuidadosamente desarrollada",
  "ordenada": "con una disposici√≥n clara y l√≥gica",
  "intuitiva": "f√°cil de usar sin instrucciones",
  "sofisticada": "de dise√±o complejo pero elegante",
  "personalizada": "adaptada a las necesidades del usuario",
  "organica": "natural y fluida en su presentaci√≥n",
  "futurista": "con est√©tica avanzada o tecnol√≥gica",
  "versatil": "adecuada para m√∫ltiples usos o plataformas",
  "compacta": "densa pero bien organizada",
  "coherente": "consistente en estilo y estructura",
  "r√°pida": "responde velozmente sin demoras",
  "robusta": "resistente y bien construida",
  "optimizada": "ajustada para obtener el mejor rendimiento",
  "agradable": "placentera y f√°cil de usar",

  // Negativos
  "fea": "con una apariencia descuidada o anticuada",
  "cutre": "de mala calidad o pobremente dise√±ada",
  "horrible": "muy desagradable visualmente",
  "desordenada": "sin estructura clara",
  "caotica": "sin organizaci√≥n ni jerarqu√≠a visual",
  "confusa": "dif√≠cil de entender o navegar",
  "anticuada": "obsoleta y con estilo desactualizado",
  "pasada": "fuera de moda o est√°ndar",
  "aburrida": "mon√≥tona y sin est√≠mulos visuales",
  "plana": "sin profundidad, textura ni variaci√≥n",
  "sobrecargada": "llena de elementos que distraen",
  "recargada": "excesivamente adornada sin prop√≥sito",
  "vaga": "poco definida y sin direcci√≥n",
  "inconsistente": "con estilos o elementos que no combinan entre s√≠",
  "ineficiente": "que no logra cumplir sus objetivos correctamente",
  "lenta": "con bajo rendimiento o tiempos de carga largos",
  "pesada": "con recursos excesivos o mal optimizada",
  "inestable": "propensa a errores o mal funcionamiento",
  "insegura": "que puede comprometer la privacidad o seguridad del usuario",
  "molesta": "que causa incomodidad visual o funcional",
  "incompleta": "que da la sensaci√≥n de estar sin terminar",
  "tosca": "poco refinada o con acabados deficientes",
  "complicada": "dif√≠cil de usar o entender",
  "repetitiva": "con elementos redundantes",
  "pobre": "de calidad baja o poco desarrollada",
  "gris": "sin vida, sin elementos que destaquen",
  "apagada": "con colores o dise√±o sin energ√≠a",
  "exagerada": "con elementos innecesariamente destacados",
  "in√∫til": "sin un prop√≥sito o funcionalidad clara",
  "enga√±osa": "puede inducir a error al usuario"
};

function stripRedundantKeywords(raw, keywords) {
  let output = raw;
  for (const word of keywords) {
    const regex = new RegExp(`\\b${word}\\b`, 'gi');
    output = output.replace(regex, '');
  }
  return output.replace(/\s{2,}/g, ' ').trim();
}

// üîß Limpia frases comunes, comparaciones vagas y ruido
function cleanRaw(raw) {
  return raw
    .replace(/\b(hola|saludos|buenas\s*(tardes|noches|d√≠as)?|hey|qu√© tal|c√≥mo\s*(est√°s|te va)|espero que est√©s bien|buen d√≠a|buenas)\b/gi, "")
    .replace(/\b(haz|haces|haga|har√°s|har√≠a|har√≠as|har√°n|hacer|hice|hizo|hecho|crea|creas|cree|creen|crear|cre√≥|crearon|crear√≠a|crear√°n|genera|generas|generar|gener√≥|generaron|generar√≠a|genera|genera|dibuja|dibujas|dibuje|dibujes|dibujar|dibuj√≥|dibujar√≠a|escribe|escribes|escriba|escribas|escribir|escribi√≥|escribieron|escribir√≠a|redacta|redactas|redacte|redactes|redactar|redact√≥|redactar√≠a|elabora|elaboras|elaborar|elabor√≥|elaborar√≠a|desarrolla|desarrollas|desarrollar|desarroll√≥|construye|construyes|construir|construy√≥|realiza|realizas|realizar|realiz√≥|organiza|organizas|organizar|organiz√≥|prepara|preparas|preparar|prepar√≥|activa|activas|activar|activ√≥|usa|usas|use|usen|usar|us√≥|utiliza|utilizas|utilizar|utiliz√≥|formula|formulas|formular|formul√≥|presenta|presentas|presentar|present√≥|muestra|muestras|muestre|mostrar|mostr√≥|dise√±a|dise√±aras|dise√±as|dise√±e|dise√±es|dise√±ar|dise√±√≥|dise√±aron|dise√±ar√≠a|representa|representas|representar|represent√≥|traduce|traduces|traducir|tradujo|convierte|conviertes|convertir|convirti√≥|transforma|transformas|transformar|transform√≥|describe|describes|describir|describi√≥|automatiza|automatizar|automatiz√≥|automatizar√≠a|programa|programar|program√≥|programar√≠a)\b/gi, "")
    .replace(/\b(quiero|quisiera|me gustar√≠a|me interesar√≠a|necesito|podr√≠as|puedes|deber√≠as|tendr√≠as|me podr√≠as|me puedes|podr√≠a|ser√≠a|deber√≠a|intenta|prueba|ay√∫dame|ayuda|te pido|ser√≠as tan amable|ind√≠came|ens√©√±ame|expl√≠came|mu√©strame|hazme|dame|di|recomi√©ndame|aconseja|cu√©ntame)\b/gi, "")
    .replace(/\b(por favor|porfa|favor|gracias|muchas gracias|vale|ok|okey|venga|genial|perfecto|dale|listo|claro|bueno|eh|mmm|aja|aj√°|ehh)\b/gi, "")
    .replace(/\b(en general|b√°sicamente|pr√°cticamente|m√°s o menos|algo as√≠|m√°s bien|sobre todo|en realidad|a veces|a menudo|de vez en cuando|usualmente|normalmente|frecuentemente|eventualmente|finalmente|generalmente|probablemente|quiz√°s|quiz√°|tal vez|posiblemente|seguramente|nunca|siempre|m√°s o menos|casi|aproximadamente|aprox|relativamente|medianamente|poco|mucho|demasiado|un poco|un tanto)\b/gi, "")
    .replace(/\b(como si fuera|parecido a|similar a|en plan|tipo de|tipo|a lo mejor|algo as√≠|m√°s que nada|m√°s que|menos que|lo t√≠pico|lo normal|lo com√∫n|lo usual|lo de siempre)\b/gi, "")
    .replace(/\b(y|o|pero|aunque|adem√°s|tambi√©n|mientras|sin embargo|porque|ya que|pues|entonces|luego|despu√©s|antes|cuando|donde|ya|s√≠|no|si|as√≠ que|por lo tanto|por consiguiente|por eso|de hecho|en cambio|por otro lado|entretanto|aun as√≠)\b/gi, "")
    .replace(/\b(el|la|los|las|un|una|unos|unas|esto|eso|aquello|ese|esa|aquel|aquella|mi|mis|tu|tus|su|sus|me|te|nos|vos|ellos|ellas|yo|t√∫|usted|ustedes|s√≠ mismo|uno mismo|algo|nada|todo|cada|cualquiera|ninguno|alg√∫n|alguna|ning√∫n|ninguna)\b/gi, "")
    .replace(/\b(ser|estar|haber|tener|hacer|ir|venir|ver|decir|dar|poder|deber|saber|querer|pensar|parecer|sentir|pasar|quedar|llevar|dejar|seguir|encontrar|leer|escribir|funcionar|servir|entender|comprender|usar|existir|ocurrir|suceder|verbo)\b/gi, "")
    .replace(/https?:\/\/[^\s]+/gi, "")
    .replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/gi, "")
    .replace(/\b\d+(\.\d+)?\b/g, "")
    .replace(/[^a-zA-Z√°√©√≠√≥√∫√±√º√Å√â√ç√ì√ö√ë√ú\s]/g, "")
    .replace(/\b(\w+)\s+\1\b/gi, "$1")
    .replace(/\s{2,}/g, " ")
    .trim();
}

function expandAdjectives(txt) {
  return txt.split(/\s+/).map(word => {
    const norm = normalize(word);
    return adjectiveExpansions[norm] || word;
  }).join(" ");
}

const rawCleaned = cleanRaw(text);
const normalizedText = normalize(rawCleaned);

const categories = [
  {
    keywords: ["web", "html", "sitio", "pagina", "formulario", "frontend"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["pagina", "p√°gina", "web", ...["html", "sitio", "formulario", "frontend"]]);
      const cleaned = expandAdjectives(stripped);
      return `üíª *Prompt para desarrollo web:*\n\nDise√±a una p√°gina web ${cleaned}. Aseg√∫rate de que sea responsive, accesible y bien estructurada. Utiliza HTML, CSS y JavaScript.`;
    }
  },
  {
    keywords: ["imagen", "visual", "dibujo", "arte", "estilo", "ilustracion", "foto", "paisaje", "retrata"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["imagen", "dibujo", "ilustracion", "foto", "paisaje"]);
      const cleaned = expandAdjectives(stripped);
      return `üñºÔ∏è *Prompt para generador de im√°genes:*\n\nGenera una imagen basada en esta descripci√≥n: ${cleaned}. Cuida iluminaci√≥n, proporciones, composici√≥n y estilo art√≠stico.`;
    }
  },
  {
    keywords: ["historia", "cuento", "relato", "ficcion", "personajes", "aventura"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["historia", "cuento", "relato", "ficcion"]);
      return `üìö *Prompt para historia creativa:*\n\nEscribe una historia original basada en esta idea: ${stripped}. Incluye personajes interesantes, narrativa coherente y un desenlace s√≥lido.`;
    }
  },
  {
    keywords: ["resumen", "resumir", "sintesis", "extracto", "resumas"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["resumen", "resumir", "sintesis", "extracto", "resumas"]);
      return `üìã *Prompt para resumen de texto:*\n\nResume el siguiente contenido de forma clara y precisa: ${stripped}. Conserva los puntos clave y evita repeticiones innecesarias.`;
    }
  },
  {
    keywords: ["email", "correo", "mensaje", "formal", "respuesta", "responder", "respondas"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["email", "correo", "mensaje", "respuesta"]);
      return `üìß *Prompt para redacci√≥n de email:*\n\nRedacta un correo formal con esta intenci√≥n: ${stripped}. Usa un tono respetuoso, lenguaje profesional y estructura adecuada.`;
    }
  },
  {
    keywords: ["codigo", "script", "programa", "funcion", "algoritmo", "automatica", "automatizar", "programar"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["codigo", "script", "programa", "funcion", "algoritmo"]);
      return `üß† *Prompt para desarrollo de c√≥digo:*\n\nCrea un script o programa que realice lo siguiente: ${stripped}. Aseg√∫rate de usar buenas pr√°cticas de programaci√≥n y explicar cada secci√≥n del c√≥digo.`;
    }
  },
  {
    keywords: ["poema", "poes√≠a", "verso", "rima", "poeta"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["poema", "poes√≠a", "verso"]);
      return `üé≠ *Prompt para poes√≠a:*\n\nEscribe un poema sobre: ${stripped}. Utiliza un estilo evocador, buena m√©trica y tono emocional.`;
    }
  },
  {
    keywords: ["linkedin", "perfil", "publicaci√≥n", "trabajo", "infojobs"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["linkedin", "perfil", "publicaci√≥n"]);
      return `üíº *Prompt para LinkedIn:*\n\nRedacta una publicaci√≥n profesional para LinkedIn basada en: ${stripped}. Usa un tono formal y motivador.`;
    }
  },
  {
    keywords: ["cv", "curriculum", "hoja de vida"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["cv", "curriculum", "hoja de vida"]);
      return `üìÑ *Prompt para CV:*\n\nGenera una secci√≥n del curr√≠culum que describa: ${stripped}. Utiliza un tono profesional y enfocado en logros.`;
    }
  },
  {
    keywords: ["pitch", "propuesta", "cliente", "inversionista"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["pitch", "propuesta", "cliente", "inversionista"]);
      return `üì¢ *Prompt para propuesta/pitch:*\n\nRedacta una propuesta o pitch convincente sobre: ${stripped}. Incluye problema, soluci√≥n y beneficios.`;
    }
  },
  {
    keywords: ["viaje", "itinerario", "destino", "turismo"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["viaje", "itinerario", "destino", "turismo"]);
      return `‚úàÔ∏è *Prompt para plan de viaje:*\n\nCrea un itinerario tur√≠stico para: ${stripped}. Incluye lugares clave, horarios sugeridos y recomendaciones.`;
    }
  },
  {
    keywords: ["dashboard", "kpi", "metricas", "informe"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["dashboard", "kpi", "metricas", "informe"]);
      return `üìä *Prompt para dashboard:*\n\nDise√±a un dashboard con m√©tricas clave para: ${stripped}. Aseg√∫rate de representar datos relevantes de forma visual.`;
    }
  },
  {
    keywords: ["latex", "ecuacion", "formula"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["latex", "ecuacion", "formula"]);
      return `üìê *Prompt LaTeX:*\n\nEscribe la f√≥rmula en LaTeX que representa: ${stripped}.`;
    }
  },
  {
    keywords: ["yaml", "configuracion", "config", "archivo"],
    prompt: (raw) => {
      const stripped = stripRedundantKeywords(raw, ["yaml", "configuracion", "config", "archivo"]);
      return `üõ†Ô∏è *Prompt para YAML/config:*\n\nConvierte lo siguiente en una configuraci√≥n YAML bien estructurada: ${stripped}.`;
    }
  },
  {
  keywords: ["an√°lisis", "analisis", "estudio", "investigaci√≥n", "examina", "evaluaci√≥n", "revisi√≥n", "reporte", "examinar"],
  prompt: (raw) => {
    const stripped = stripRedundantKeywords(raw, ["an√°lisis", "analisis", "estudio", "investigaci√≥n", "evaluaci√≥n", "revisi√≥n", "reporte"]);
    const cleaned = expandAdjectives(stripped).replace(/^de(l)?\s+/i, ""); // elimina un "del"/"de" inicial si lo hay
    return `üîç *Prompt para an√°lisis o estudio:*\n\nRealiza un an√°lisis detallado sobre: ${cleaned}. Incluye observaciones relevantes, posibles conclusiones y, si es pertinente, gr√°ficos o comparativas.`;
  }
},
{
  keywords: ["texto", "desarrolla", "explica", "describe", "escribe", "redacta", "parrafo", "contenido", "tema", "hazme", "elabora"],
  prompt: (raw) => {
    const stripped = stripRedundantKeywords(raw, ["texto", "desarrolla", "explica", "describe", "escribe", "redacta", "parrafo", "contenido", "tema", "hazme", "elabora", "sobre"]);
    return `‚úçÔ∏è *Prompt para desarrollo de texto:*\n\nEscribe un texto claro y detallado sobre: ${stripped}. Aseg√∫rate de que sea coherente, bien estructurado y relevante al tema.`;
  }
}
];

  for (const category of categories) {
    if (category.keywords.some(keyword => normalizedText.includes(normalize(keyword)))) {
    return category.prompt(rawCleaned);
  }
}

// Si no se detecta ning√∫n tema conocido
return `ü§î *No se ha detectado un tema espec√≠fico:*\n\nAsegurate de que no hay faltas de ortograf√≠a e intenta reformular la idea usando palabras clave m√°s claras o espec√≠ficas.\nPor ejemplo: "crear una p√°gina web de recetas", "resumir un art√≠culo", "generar una imagen de un drag√≥n en el espacio", etc.`;
  }
</script>
</body>
</html>